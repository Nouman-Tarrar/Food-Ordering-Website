import{a as l,R as e}from"./react-DiaKWkc7.js";import{R as V}from"./react-dom-DXyHqHJV.js";import{y as A,L as J}from"./react-toastify-BbIke1Ak.js";import"./firebase-B-RLue0r.js";import{i as X,g as ee,G as te,a as ae,o as re,b as D,d as v,s as ne,c as se,e as G,f as le,h as j,j as L,k as I,l as O,m as z,u as T,q as H,w as W,n as oe}from"./@firebase-BC4Fs9jl.js";import{u as q,L as C,a as ce,N as U,O as me,R as ie,b as w,B as ue}from"./react-router-BwOJxSVg.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./clsx-B-dksMZM.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}})();const Y=l.createContext({cartItems:[],addToCart:(t,o)=>{},clearCart:()=>{}});function $(){return l.useContext(Y)}function de({children:t}){const[o,c]=l.useState([]),a=(s,i)=>{c(f=>f.some(x=>x.id===s.id)?f:[...f,{...s,quantity:i}])},n=()=>{c([])};return e.createElement(Y.Provider,{value:{cartItems:o,addToCart:a,clearCart:n}},t)}const ge={apiKey:"AIzaSyAFz5_tLilVVCtf7r3hLA1qINrPnaZQ8q0",authDomain:"food-ordering-website-a7a08.firebaseapp.com",projectId:"food-ordering-website-a7a08",storageBucket:"food-ordering-website-a7a08.firebasestorage.app",messagingSenderId:"1042043609207",appId:"1:1042043609207:web:8f594089004cf7fed6e672"},K=X(ge),b=ee(K),Z=new te,E=ae(K),_=l.createContext();function pe({children:t}){const[o,c]=l.useState(null),[a,n]=l.useState(!0);l.useEffect(()=>re(b,async f=>{if(f){const x=await D(v(E,"users",f.uid));c(x.exists()?x.data().role:null)}else c(null);n(!1)}),[]);const s=async()=>{await ne(b),A.info("Logged out"),c(null)};return a?e.createElement("div",{className:"p-6 text-center"},"Loading…"):e.createElement(_.Provider,{value:{role:o,logout:s}},t)}const M=()=>l.useContext(_);function Ee(){const[t,o]=l.useState("user"),[c,a]=l.useState(""),[n,s]=l.useState(""),i=q(),f=(d,h,r)=>{d==="user"&&(!h.trim()||!r.trim())?i("/user/profile"):d==="restaurant"&&(!h.trim()||!r.trim())?i("/restaurant/profile"):i(d==="user"?"/user/home":"/restaurant/home")},x=async d=>{d.preventDefault();try{const h=await se(b,c,n),r=await D(v(E,"users",h.user.uid)),{role:u,phone:m="",address:p=""}=r.data()||{};if(u!==t)throw new Error("Wrong role selected");f(u,m,p)}catch(h){A.error(h.message)}},N=async()=>{try{const d=await G(b,Z),h=await D(v(E,"users",d.user.uid)),{role:r,phone:u="",address:m=""}=h.data()||{};if(r!==t)throw new Error("Wrong role selected");f(r,u,m)}catch(d){A.error(d.message)}};return e.createElement("div",{className:"flex justify-center items-center min-h-[80vh]"},e.createElement("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-6"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},"- Foodie Hub -"),e.createElement("div",{className:"flex border-b border-gray-200 mb-6"},["user","restaurant"].map(d=>e.createElement("button",{key:d,onClick:()=>o(d),className:`w-1/2 text-center py-2 font-semibold ${t===d?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Login as ",d==="user"?"User":"Restaurant"))),e.createElement("form",{onSubmit:x,className:"space-y-4"},e.createElement("input",{type:"email",placeholder:"you@example.com",required:!0,value:c,onChange:d=>a(d.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"password",placeholder:"••••••••",required:!0,value:n,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"},"Login")),e.createElement("div",{className:"mt-4 text-center"},e.createElement("span",{className:"text-gray-600 mr-2"},"Or login with"),e.createElement("button",{onClick:N,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Google")),e.createElement("p",{className:"mt-6 text-center text-gray-600"},"Don’t have an account?"," ",e.createElement("a",{href:"/signup",className:"text-orange-500 hover:underline"},"Signup now"))))}function fe(){const[t,o]=l.useState("user"),[c,a]=l.useState(""),[n,s]=l.useState(""),[i,f]=l.useState(""),[x,N]=l.useState(""),d=q(),h=m=>{d(m==="user"?"/user/profile":"/restaurant/profile")},r=async m=>{if(m.preventDefault(),i!==x)return A.error("Passwords do not match.");try{const y=(await le(b,n,i)).user.uid,P=t;await j(v(E,"users",y),{username:c,email:n,role:P,phone:"",address:"",createdAt:L()}),P==="restaurant"&&await j(v(E,"restaurants",y),{ownerName:c,restName:"",email:n,phone:"",address:"",rating:0,totalReviews:0,createdAt:L()}),A.success("Signup successful! Please complete your profile."),h(P)}catch(p){A.error(p.message)}},u=async()=>{try{const m=await G(b,Z),p=m.user.uid,y=t;await j(v(E,"users",p),{username:m.user.displayName||"",email:m.user.email,role:y,phone:"",address:"",createdAt:L()},{merge:!0}),y==="restaurant"&&await j(v(E,"restaurants",p),{ownerName:m.user.displayName||"",restName:"",email:m.user.email,phone:"",address:"",rating:0,totalReviews:0,createdAt:L()},{merge:!0}),A.success("Google signup successful! Please complete your profile."),h(y)}catch(m){A.error(m.message)}};return e.createElement("div",{className:"flex justify-center items-center min-h-[80vh]"},e.createElement("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-6"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},"- Foodie Hub -"),e.createElement("div",{className:"flex border-b border-gray-200 mb-6"},["user","restaurant"].map(m=>e.createElement("button",{key:m,onClick:()=>o(m),className:`w-1/2 text-center py-2 font-semibold ${t===m?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Signup as ",m==="user"?"User":"Restaurant"))),e.createElement("form",{onSubmit:r,className:"space-y-4"},e.createElement("input",{type:"text",placeholder:"Username",required:!0,value:c,onChange:m=>a(m.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"email",placeholder:"you@example.com",required:!0,value:n,onChange:m=>s(m.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"password",placeholder:"••••••••",required:!0,value:i,onChange:m=>f(m.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"password",placeholder:"Confirm Password",required:!0,value:x,onChange:m=>N(m.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}),e.createElement("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"},"Signup")),e.createElement("div",{className:"mt-4 text-center"},e.createElement("span",{className:"text-gray-600 mr-2"},"Or signup with"),e.createElement("button",{onClick:u,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Google")),e.createElement("p",{className:"mt-6 text-center text-gray-600"},"Already have an account?"," ",e.createElement("a",{href:"/login",className:"text-orange-500 hover:underline"},"Login now"))))}const he="/assets/ChickenBiryani-DWTG1M59.jpg",xe="/assets/ChickenKarahi-CtOMsznR.jpg",be="/assets/ChickenAlfredo-CwRir2Jy.jpg",we="/assets/Sushi-C_r_Yxaa.jpg",ve="/assets/Pizza-DbEfe1bx.jpg",Ne="/assets/ZingerBurger-k51C8D9o.png";function ye(){return e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-bold text-center text-gray-300 mb-8"},"Welcome to - Foodie Hub -"),e.createElement("div",{className:"flex justify-center mb-8"},e.createElement(C,{to:"/user/restaurants",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg text-lg font-semibold"},"Order Now")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"},e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:he,alt:"Chicken Biryani",className:"w-full h-64 object-cover"})),e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:xe,alt:"Chicken Karahi",className:"w-full h-64 object-cover"})),e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:be,alt:"Chicken Alfredo",className:"w-full h-64 object-cover"})),e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:we,alt:"Sushi",className:"w-full h-56 object-cover"})),e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:ve,alt:"Pizza",className:"w-full h-56 object-cover"})),e.createElement("div",{className:"rounded-lg overflow-hidden shadow-lg"},e.createElement("img",{src:Ne,alt:"Zinger Burger",className:"w-full h-56 object-cover"}))))}function Ce(){const[t,o]=l.useState([]),c=q();return l.useEffect(()=>{(async()=>{const a=await I(O(E,"restaurants"));o(a.docs.map(n=>({id:n.id,...n.data()})))})()},[]),e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-bold text-gray-300 mb-6"},"Restaurants"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},t.map(a=>e.createElement("div",{key:a.id,onClick:()=>c(`/user/restaurant/${a.id}`),className:"cursor-pointer bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl border"},e.createElement("img",{src:a.image||"",alt:a.restName,className:"w-full h-44 object-cover"}),e.createElement("div",{className:"p-4"},e.createElement("h3",{className:"text-xl font-semibold"},a.restName),e.createElement("p",{className:"mt-1"},"Rating: ",a.rating||0," ⭐"))))))}function Se(){const{id:t}=ce(),o=O(E,"restaurants",t,"menu"),c=O(E,"restaurants",t,"reviews"),[a,n]=l.useState(null),[s,i]=l.useState([]),[f,x]=l.useState([]),[N,d]=l.useState({}),[h,r]=l.useState(5),[u,m]=l.useState(""),{cartItems:p,addToCart:y}=$();l.useEffect(()=>{(async()=>{const g=await D(v(E,"restaurants",t));g.exists()&&n(g.data());const R=(await I(o)).docs.map(F=>({id:F.id,...F.data()}));i(R),d(R.reduce((F,Q)=>({...F,[Q.id]:1}),{}));const k=await I(c);x(k.docs.map(F=>({id:F.id,...F.data()})))})()},[t]);const P=async()=>{await z(c,{userId:b.currentUser.uid,rating:h,reviewText:u,createdAt:L()});const g=await I(c);x(g.docs.map(S=>({id:S.id,...S.data()}))),m(""),r(5)};return a?e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-md"},e.createElement("h2",{className:"text-3xl font-bold mb-2"},a.restName),e.createElement("p",null,"Rating: ",a.rating||0," ⭐")),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-md"},e.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Menu"),s.map(g=>{const S=p.some(R=>R.id===g.id);return e.createElement("div",{key:g.id,className:"flex justify-between items-center border-b pb-2 mb-2"},e.createElement("div",null,e.createElement("p",{className:"font-medium"},g.name),e.createElement("p",null,"Rs. ",g.price.toFixed(2))),e.createElement("div",{className:"flex items-center space-x-2"},e.createElement("select",{disabled:S,value:N[g.id],onChange:R=>d({...N,[g.id]:+R.target.value}),className:"px-4 py-2 text-base border rounded-xl"},[...Array(10)].map((R,k)=>e.createElement("option",{key:k+1,value:k+1},k+1,"×"))),e.createElement("button",{disabled:S,onClick:()=>y({...g,restaurantId:t},N[g.id]),className:`px-4 py-1 rounded-2xl text-white ${S?"bg-green-500":"bg-orange-500 hover:bg-orange-600"}`},S?"Added":"Add to Cart")))})),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-md"},e.createElement("p",null,"Delivery Fee: Rs. 160")),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-md"},e.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Reviews"),f.map(g=>e.createElement("div",{key:g.id,className:"mb-2"},e.createElement("p",null,e.createElement("strong",null,g.rating," ⭐")," – ",g.reviewText))),e.createElement("div",{className:"mt-4"},e.createElement("label",{className:"block mb-1 text-gray-700 font-medium"},"Your Rating:"),e.createElement("select",{value:h,onChange:g=>r(+g.target.value),className:"w-32 px-4 py-2 border rounded-xl text-base"},[1,2,3,4,5].map(g=>e.createElement("option",{key:g,value:g},g," Star",g>1?"s":""))),e.createElement("textarea",{rows:3,value:u,onChange:g=>m(g.target.value),placeholder:"Write a review…",className:"w-full mt-3 border rounded-lg p-3"}),e.createElement("button",{onClick:P,className:"mt-2 bg-orange-500 text-white px-6 py-2 rounded-lg"},"Submit Review")))):e.createElement("div",{className:"p-6"},"Loading…")}function Re(){const{cartItems:t,clearCart:o}=$(),[c,a]=l.useState(!1),[n,s]=l.useState(!1),[i,f]=l.useState({name:"",phone:"",address:""}),x=160,d=t.reduce((r,u)=>r+u.price*u.quantity,0)+x,h=async()=>{var r;await z(O(E,"orders"),{userId:b.currentUser.uid,restaurantId:(r=t[0])==null?void 0:r.restaurantId,items:t.map(({id:u,name:m,price:p,quantity:y})=>({id:u,name:m,price:p,quantity:y})),status:"New",deliveryFee:x,totalAmount:d,shippingInfo:i,createdAt:L()}),o(),s(!0)};return n?e.createElement("div",{className:"text-center py-20"},e.createElement("h2",{className:"text-3xl text-gray-300 font-bold mb-4"},"Order Confirmed!"),e.createElement("p",null,"Thank you for ordering. Your food is on its way!")):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md"},e.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Your Cart"),t.length===0?e.createElement("p",null,"Your cart is empty."):e.createElement(e.Fragment,null,t.map(r=>e.createElement("div",{key:r.id,className:"flex justify-between border-b pb-2 mb-2"},e.createElement("p",null,r.quantity,"× ",r.name),e.createElement("p",null,"Rs. ",(r.price*r.quantity).toFixed(2)))),e.createElement("div",{className:"flex justify-between border-t pt-2"},e.createElement("p",null,"Delivery Fee"),e.createElement("p",null,"Rs. ",x.toFixed(2))),e.createElement("div",{className:"flex justify-between border-t pt-2 font-bold"},e.createElement("p",null,"Total"),e.createElement("p",null,"Rs. ",d.toFixed(2))),e.createElement("div",{className:"text-right mt-4"},e.createElement("button",{onClick:()=>a(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg"},"Checkout")))),c&&t.length>0&&e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-4"},e.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Shipping Details"),["name","phone","address"].map(r=>e.createElement("div",{key:r},e.createElement("label",{className:"block text-gray-700 capitalize"},r),r==="address"?e.createElement("textarea",{rows:3,required:!0,value:i[r],onChange:u=>f({...i,[r]:u.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}):e.createElement("input",{type:r==="phone"?"tel":"text",required:!0,value:i[r],onChange:u=>f({...i,[r]:u.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}))),e.createElement("div",{className:"flex justify-between items-center"},e.createElement("p",{className:"font-medium"},"Total Amount:"),e.createElement("p",{className:"font-bold"},"Rs. ",d.toFixed(2))),e.createElement("div",{className:"text-right"},e.createElement("button",{onClick:h,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg"},"Confirm Order"))))}function ke(){const[t,o]=l.useState({username:"",email:"",phone:"",address:""});l.useEffect(()=>{(async()=>{if(!b.currentUser)return;const n=await D(v(E,"users",b.currentUser.uid));if(n.exists()){const s=n.data();o({username:s.username||"",email:s.email||"",phone:s.phone||"",address:s.address||""})}})()},[]);const c=async()=>{b.currentUser&&(await T(v(E,"users",b.currentUser.uid),{username:t.username,email:t.email,phone:t.phone,address:t.address}),alert("Profile updated! You can now proceed."))};return e.createElement("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md"},e.createElement("h2",{className:"text-2xl font-bold mb-4"},"My Profile"),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700"},"Username"),e.createElement("input",{type:"text",value:t.username,onChange:a=>o({...t,username:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700"},"Email"),e.createElement("input",{type:"email",value:t.email,onChange:a=>o({...t,email:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700"},"Phone"),e.createElement("input",{type:"tel",value:t.phone,onChange:a=>o({...t,phone:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700"},"Address"),e.createElement("textarea",{rows:2,value:t.address,onChange:a=>o({...t,address:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"})),e.createElement("button",{onClick:c,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-semibold"},"Save Changes"))}function Pe(){const[t,o]=l.useState({pendingOrders:0,completedOrders:0,totalEarnings:0,rating:0,totalReviews:0});return l.useEffect(()=>{(async()=>{const c=b.currentUser.uid,n=(await I(H(O(E,"orders"),W("restaurantId","==",c)))).docs.map(r=>r.data()),s=n.filter(r=>r.status!=="Completed").length,i=n.filter(r=>r.status==="Completed").length,f=n.filter(r=>r.status==="Completed").reduce((r,u)=>r+(u.totalAmount||0),0),N=(await I(O(E,"restaurants",c,"reviews"))).docs.map(r=>r.data()),d=N.length,h=d>0?N.reduce((r,u)=>r+u.rating,0)/d:0;o({pendingOrders:s,completedOrders:i,totalEarnings:f,rating:h.toFixed(1),totalReviews:d})})()},[]),e.createElement("div",{className:"space-y-8"},e.createElement("h2",{className:"text-3xl font-bold text-gray-300 mb-4"},"Dashboard"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},e.createElement("div",{className:"bg-white p-6 rounded-xl shadow-md"},e.createElement("h3",{className:"text-xl font-semibold"},"Pending Orders"),e.createElement("p",{className:"text-2xl"},t.pendingOrders)),e.createElement("div",{className:"bg-white p-6 rounded-xl shadow-md"},e.createElement("h3",{className:"text-xl font-semibold"},"Completed Orders"),e.createElement("p",{className:"text-2xl"},t.completedOrders)),e.createElement("div",{className:"bg-white p-6 rounded-xl shadow-md"},e.createElement("h3",{className:"text-xl font-semibold"},"Total Earnings"),e.createElement("p",{className:"text-2xl"},"Rs. ",t.totalEarnings.toFixed(2))),e.createElement("div",{className:"bg-white p-6 rounded-xl shadow-md"},e.createElement("h3",{className:"text-xl font-semibold"},"Rating"),e.createElement("p",{className:"text-2xl"},t.rating," ⭐")),e.createElement("div",{className:"bg-white p-6 rounded-xl shadow-md"},e.createElement("h3",{className:"text-xl font-semibold"},"Total Reviews"),e.createElement("p",{className:"text-2xl"},t.totalReviews))))}function Ae(){const[t,o]=l.useState([]);l.useEffect(()=>{(async()=>{const a=H(O(E,"orders"),W("restaurantId","==",b.currentUser.uid)),n=await I(a);o(n.docs.map(s=>({id:s.id,...s.data()})))})()},[]);const c=async a=>{const n=a.status==="New"?"Preparing":a.status==="Preparing"?"Ready":a.status==="Ready"?"Out for Delivery":"Completed";await T(v(E,"orders",a.id),{status:n}),o(t.map(s=>s.id===a.id?{...s,status:n}:s))};return e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-300 mb-4"},"Orders"),t.map(a=>{var n,s;return e.createElement("div",{key:a.id,className:"bg-white p-6 rounded-lg shadow-md"},e.createElement("div",{className:"flex justify-between mb-2"},e.createElement("h3",{className:"text-xl font-semibold"},"Order #",a.id),e.createElement("p",null,"Status: ",a.status)),e.createElement("p",null,"Customer: ",(n=a.shippingInfo)==null?void 0:n.name),e.createElement("p",null,"Items: ",a.items.map(i=>i.name).join(", ")),e.createElement("p",{className:"mt-1 font-medium"},"Total Amount: Rs. ",(s=a.totalAmount)==null?void 0:s.toFixed(2)),a.status!=="Completed"&&e.createElement("button",{onClick:()=>c(a),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg mt-2"},a.status==="New"?"Start Preparing":a.status==="Preparing"?"Mark Ready":a.status==="Ready"?"Out for Delivery":"Complete"))}))}function Ie(){const t=b.currentUser.uid,o=O(E,"restaurants",t,"menu"),[c,a]=l.useState([]),[n,s]=l.useState(""),[i,f]=l.useState("");l.useEffect(()=>{(async()=>{const r=await I(o);a(r.docs.map(u=>({id:u.id,...u.data()})))})()},[]);const x=async()=>{if(!n||!i)return;const r=await z(o,{name:n,price:parseFloat(i),createdAt:L()});a([...c,{id:r.id,name:n,price:+i}]),s(""),f("")},N=async r=>{await oe(v(E,"restaurants",t,"menu",r)),a(c.filter(u=>u.id!==r))},d=async(r,u,m)=>{await T(v(E,"restaurants",t,"menu",r),{[u]:u==="price"?parseFloat(m):m}),a(c.map(p=>p.id===r?{...p,[u]:m}:p))};return e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-300"},"Edit Menu"),e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md flex gap-4"},e.createElement("input",{type:"text",placeholder:"Name",value:n,onChange:r=>s(r.target.value),className:"flex-1 px-4 py-2 border rounded-lg"}),e.createElement("input",{type:"number",placeholder:"Price",value:i,onChange:r=>f(r.target.value),className:"flex-1 px-4 py-2 border rounded-lg"}),e.createElement("button",{onClick:x,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg"},"Add Item")),c.map(r=>e.createElement(h,{key:r.id,item:r,updateItem:d,deleteItem:N})));function h({item:r,updateItem:u,deleteItem:m}){const[p,y]=l.useState(!1),[P,g]=l.useState(r.name),[S,R]=l.useState(r.price);return e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-4 gap-4 items-center"},e.createElement("div",{className:"space-y-2 md:col-span-2"},e.createElement("input",{disabled:!p,value:P,onChange:k=>g(k.target.value),className:`w-full px-4 py-2 border rounded-lg ${p?"":"bg-gray-100 cursor-not-allowed"}`}),e.createElement("input",{disabled:!p,type:"number",value:S,onChange:k=>R(k.target.value),className:`w-full px-4 py-2 border rounded-lg ${p?"":"bg-gray-100 cursor-not-allowed"}`})),e.createElement("div",{className:"flex space-x-2"},e.createElement("button",{onClick:async()=>{p&&(await u(r.id,"name",P),await u(r.id,"price",S)),y(!p)},className:`px-4 py-2 rounded-lg font-semibold ${p?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`},p?"Save":"Edit"),e.createElement("button",{onClick:()=>m(r.id),className:"px-4 py-2 rounded-lg font-semibold bg-red-500 hover:bg-red-600 text-white"},"Delete")))}}function Oe(){const[t,o]=l.useState({ownerName:"",restName:"",address:"",phone:"",email:"",image:""});l.useEffect(()=>{(async()=>{const a=await D(v(E,"restaurants",b.currentUser.uid));a.exists()&&o(a.data())})()},[]);const c=async()=>{await T(v(E,"restaurants",b.currentUser.uid),t),alert("Profile updated!")};return e.createElement("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md"},e.createElement("h2",{className:"text-2xl font-bold mb-4"},"Restaurant Profile"),t.image&&e.createElement("div",{className:"mb-4 text-center"},e.createElement("img",{src:t.image,alt:"Restaurant Logo",className:"mx-auto w-32 h-32 object-cover rounded-full border"})),[{field:"ownerName",label:"Owner Name",type:"text"},{field:"restName",label:"Restaurant Name",type:"text"},{field:"address",label:"Address",type:"textarea"},{field:"phone",label:"Phone",type:"tel"},{field:"email",label:"Email",type:"email"},{field:"image",label:"Image URL",type:"text"}].map(({field:a,label:n,type:s})=>e.createElement("div",{key:a,className:"mb-4"},e.createElement("label",{className:"block text-gray-700 font-medium mb-1"},n),s==="textarea"?e.createElement("textarea",{rows:2,value:t[a],onChange:i=>o({...t,[a]:i.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}):e.createElement("input",{type:s,value:t[a],onChange:i=>o({...t,[a]:i.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-400"}))),e.createElement("button",{onClick:c,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-semibold"},"Save Changes"))}function Fe(){const{role:t,logout:o}=M(),c=q(),a=()=>{window.confirm("Are you sure you want to logout?")&&(o(),c("/login"))};return e.createElement("nav",{className:"bg-zinc-950 text-white shadow-sm border-b border-zinc-800"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center"},e.createElement(C,{to:t==="user"?"/user/home":t==="restaurant"?"/restaurant/home":"/login",className:"text-2xl font-extrabold tracking-wide text-orange-400 hover:text-white"},"- Foodie Hub -"),e.createElement("div",{className:"flex items-center gap-8"},t==="user"&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(C,{to:"/user/home"},"Home")),e.createElement("li",null,e.createElement(C,{to:"/user/restaurants"},"Restaurants")),e.createElement("li",null,e.createElement(C,{to:"/user/cart"},"Cart")),e.createElement("li",null,e.createElement(C,{to:"/user/profile"},"Profile"))),t==="restaurant"&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(C,{to:"/restaurant/home"},"Dashboard")),e.createElement("li",null,e.createElement(C,{to:"/restaurant/orders"},"Orders")),e.createElement("li",null,e.createElement(C,{to:"/restaurant/menu"},"Menu")),e.createElement("li",null,e.createElement(C,{to:"/restaurant/profile"},"Profile"))),!t&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(C,{to:"/login"},"Login")),e.createElement("li",null,e.createElement(C,{to:"/signup"},"Signup"))),t&&e.createElement("button",{onClick:a,className:"ml-4 bg-orange-500 hover:bg-orange-600 text-white px-4 py-1.5 rounded-md font-medium"},"Logout"))))}function Le(){const t=new Date().getFullYear();return e.createElement("footer",{className:"bg-zinc-950 text-gray-400 text-sm px-4 md:px-10 py-6 border-t border-zinc-800"},e.createElement("div",{className:"max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-semibold text-orange-400"},"Foodie Hub"),e.createElement("p",{className:"mt-1 text-xs text-gray-500"},"© ",t," Foodie Hub")),e.createElement("div",null,e.createElement("h4",{className:"font-medium text-sm"},"Follow Us"),e.createElement("ul",{className:"mt-2 space-y-1"},e.createElement("li",null,e.createElement("a",{href:"#",className:"hover:text-white"},"Facebook")),e.createElement("li",null,e.createElement("a",{href:"#",className:"hover:text-white"},"Twitter")),e.createElement("li",null,e.createElement("a",{href:"#",className:"hover:text-white"},"Instagram")))),e.createElement("div",null,e.createElement("h4",{className:"font-medium text-sm"},"Contact"),e.createElement("ul",{className:"mt-2 space-y-1 text-xs"},e.createElement("li",null,"Email: support@foodiehub.com"),e.createElement("li",null,"Phone: +1 (800) 123‑4567"),e.createElement("li",null,"123 Foodie Lane, Flavor Town"))),e.createElement("div",null,e.createElement("h4",{className:"font-medium text-sm"},"Legal"),e.createElement("ul",{className:"mt-2 space-y-1 text-xs"},e.createElement("li",null,e.createElement("a",{href:"#",className:"hover:text-white"},"Privacy Policy")),e.createElement("li",null,e.createElement("a",{href:"#",className:"hover:text-white"},"Terms of Service"))))))}function B({requiredRole:t}){const{role:o}=M();return o?o!==t?e.createElement(U,{to:"/login",replace:!0}):e.createElement(me,null):e.createElement(U,{to:"/login",replace:!0})}function De(){const{role:t}=M();return e.createElement(de,null,e.createElement("div",{className:"flex flex-col min-h-screen"},e.createElement(Fe,null),e.createElement("div",{className:"flex-grow container mx-auto px-4 py-6"},e.createElement(ie,null,e.createElement(w,{path:"/",element:e.createElement(U,{to:"/login",replace:!0})}),e.createElement(w,{path:"/login",element:e.createElement(Ee,null)}),e.createElement(w,{path:"/signup",element:e.createElement(fe,null)}),e.createElement(w,{element:e.createElement(B,{requiredRole:"user"})},e.createElement(w,{path:"/user/home",element:e.createElement(ye,null)}),e.createElement(w,{path:"/user/restaurants",element:e.createElement(Ce,null)}),e.createElement(w,{path:"/user/restaurant/:id",element:e.createElement(Se,null)}),e.createElement(w,{path:"/user/cart",element:e.createElement(Re,null)}),e.createElement(w,{path:"/user/profile",element:e.createElement(ke,null)})),e.createElement(w,{element:e.createElement(B,{requiredRole:"restaurant"})},e.createElement(w,{path:"/restaurant/home",element:e.createElement(Pe,null)}),e.createElement(w,{path:"/restaurant/orders",element:e.createElement(Ae,null)}),e.createElement(w,{path:"/restaurant/menu",element:e.createElement(Ie,null)}),e.createElement(w,{path:"/restaurant/profile",element:e.createElement(Oe,null)})),e.createElement(w,{path:"*",element:e.createElement("div",{className:"text-center text-red-500"},"404 ‐ Page Not Found")}))),e.createElement(Le,null),e.createElement(J,{position:"bottom-right",autoClose:3e3})))}V.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(ue,null,e.createElement(pe,null,e.createElement(De,null)))));
